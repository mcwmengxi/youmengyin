import{_ as s,o as n,c as a,a as e}from"./app.e4e7f5a5.js";const C=JSON.parse('{"title":"jenkins","description":"","frontmatter":{},"headers":[{"level":2,"title":"Docker","slug":"docker"},{"level":3,"title":"Docker\u6982\u8FF0","slug":"docker\u6982\u8FF0"},{"level":2,"title":"\u5B89\u88C5docker","slug":"\u5B89\u88C5docker"},{"level":3,"title":"\u963F\u91CC\u4E91\u955C\u50CF\u52A0\u901F","slug":"\u963F\u91CC\u4E91\u955C\u50CF\u52A0\u901F"}],"relativePath":"devops/docker.md","lastUpdated":1675618107000}'),l={name:"devops/docker.md"},p=e(`<h1 id="jenkins" tabindex="-1">jenkins <a class="header-anchor" href="#jenkins" aria-hidden="true">#</a></h1><p>\u67E5\u770Bjdk\u7248\u672C <code>yum search java|grep jdk</code></p><h2 id="docker" tabindex="-1">Docker <a class="header-anchor" href="#docker" aria-hidden="true">#</a></h2><h3 id="docker\u6982\u8FF0" tabindex="-1">Docker\u6982\u8FF0 <a class="header-anchor" href="#docker\u6982\u8FF0" aria-hidden="true">#</a></h3><blockquote><p>\u7531\u5BA2\u6237\u7AEF\u3001\u8FDC\u7A0B\u4ED3\u5E93\u3001\u670D\u52A1\u5668\u7EC4\u6210</p></blockquote><p>\u955C\u50CFimage: \u901A\u8FC7\u955C\u50CF\u53EF\u4EE5\u5FEB\u901F\u521B\u5EFA\u5BB9\u5668</p><p>\u5BB9\u5668container: \u901A\u8FC7\u5BB9\u5668\u72EC\u7ACB\u8FD0\u884C\u4E00\u4E2A\u7EC4\u5E94\u7528</p><p>\u4ED3\u5E93repository: \u7C7B\u4F3C\u4E8Egit\uFF0C\u7528\u4E8E\u5B58\u653E\u955C\u50CF</p><h2 id="\u5B89\u88C5docker" tabindex="-1">\u5B89\u88C5docker <a class="header-anchor" href="#\u5B89\u88C5docker" aria-hidden="true">#</a></h2><p>\u67E5\u770B\u7CFB\u7EDF\u5185\u6838 <code>uname -r</code></p><p>\u67E5\u770B\u914D\u7F6E\u4FE1\u606F <code>cat /etc/os-release</code><img src="https://img-blog.csdnimg.cn/70190a5c7cf14099938e27f13ab47799.png" alt=""></p><div class="language-shell line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">// \u79FB\u9664docker\u65E7\u7684\u7248\u672C</span></span>
<span class="line"><span style="color:#A6ACCD;">yum remove docker \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  docker-client \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  docker-client-latest \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  docker-common \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  docker-latest \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  docker-latest-logrotate \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  docker-logrotate \\</span></span>
<span class="line"><span style="color:#A6ACCD;">                  docker-engine</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span></span>
<span class="line"><span style="color:#A6ACCD;">// 2.\u5B89\u88C5\u9700\u8981\u7684\u5DE5\u5177\u5305</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">yum install -y yum-utils</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">// 3.\u8BBE\u7F6E\u955C\u50CF\u4ED3\u5E93</span></span>
<span class="line"><span style="color:#A6ACCD;">yum-config-manager \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    --add-repo \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    https://download.docker.com/linux/centos/docker-ce.repo </span><span style="color:#676E95;font-style:italic;"># \u9ED8\u8BA4\u662F\u56FD\u5916\u7684</span></span>
<span class="line"><span style="color:#A6ACCD;">yum-config-manager \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    --add-repo \\</span></span>
<span class="line"><span style="color:#A6ACCD;">    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo </span><span style="color:#676E95;font-style:italic;"># \u63A8\u8350\u4F7F\u7528\u963F\u91CC\u4E91\u7684</span></span>
<span class="line"><span style="color:#A6ACCD;">// 4.\u5B89\u88C5docker\u5305 docker-ce \u793E\u533A\u7248 ee\u4F01\u4E1A\u7248</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> \u9996\u5148\u66F4\u65B0yum\u8F6F\u4EF6\u7D22\u5F15</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">yum makecache fast</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">yum install docker-ce docker-ce-cli containerd.io</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">\u9A8C\u8BC1docker\u5B89\u88C5\u6210\u529F</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;"> docker version</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">\u542F\u52A8</span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">systemctl start docker</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>\u{1F680}\u8FD0\u884C<code>hello-world</code>\u955C\u50CF</p><p><img src="https://img-blog.csdnimg.cn/2579e49de8944579b1f523da0e96fa6b.png" alt=""></p><p>\u67E5\u770B\u955C\u50CF<code>docker images</code></p><div class="language-shell line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">root@luo /</span><span style="color:#89DDFF;">]</span><span style="color:#676E95;font-style:italic;"># docker images</span></span>
<span class="line"><span style="color:#A6ACCD;">REPOSITORY      TAG       IMAGE ID       CREATED         SIZE</span></span>
<span class="line"><span style="color:#A6ACCD;">redis           5         c5da061a611a   10 months ago   110MB</span></span>
<span class="line"><span style="color:#A6ACCD;">mysql           5.7       c20987f18b13   10 months ago   448MB</span></span>
<span class="line"><span style="color:#A6ACCD;">alpine          latest    c059bfaa849c   11 months ago   5.59MB</span></span>
<span class="line"><span style="color:#A6ACCD;">registry        2         b8604a3fe854   11 months ago   26.2MB</span></span>
<span class="line"><span style="color:#A6ACCD;">hello-world     latest    feb5d9fea6a5   13 months ago   13.3kB</span></span>
<span class="line"><span style="color:#A6ACCD;">mongo           4.2.5     fddee5bccba3   2 years ago     388MB</span></span>
<span class="line"><span style="color:#A6ACCD;">logstash        7.6.2     fa5b3b1e9757   2 years ago     813MB</span></span>
<span class="line"><span style="color:#A6ACCD;">elasticsearch   7.6.2     f29a1ee41030   2 years ago     791MB</span></span>
<span class="line"><span style="color:#A6ACCD;">rabbitmq        3.7.15    b3639fca0afd   3 years ago     149MB</span></span>
<span class="line"><span style="color:#A6ACCD;">nginx           1.10      0346349a1a64   5 years ago     182MB</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u5378\u8F7Ddocker<code>yum remove docker-ce docker-ce-cli containerd.io docker-compose-plugin</code></p><p><code>rm -rf /var/lib/docker</code> docker\u9ED8\u8BA4\u5DE5\u4F5C\u8DEF\u5F84</p><p><code>rm -rf /var/lib/containerd</code></p><h3 id="\u963F\u91CC\u4E91\u955C\u50CF\u52A0\u901F" tabindex="-1">\u963F\u91CC\u4E91\u955C\u50CF\u52A0\u901F <a class="header-anchor" href="#\u963F\u91CC\u4E91\u955C\u50CF\u52A0\u901F" aria-hidden="true">#</a></h3><p><img src="https://img-blog.csdnimg.cn/9f25c969936a42f48fd6f74e61b1ca74.png" alt=""></p><p>\u914D\u7F6E\u52A0\u901F</p><div class="language-shell line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">sudo mkdir -p /etc/docker</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">sudo tee /etc/docker/daemon.json </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#C3E88D;">-&#39;</span><span style="color:#89DDFF;font-style:italic;">EOF</span><span style="color:#C3E88D;">&#39;</span></span>
<span class="line"><span style="color:#C3E88D;">{</span></span>
<span class="line"><span style="color:#C3E88D;">  &quot;registry-mirrors&quot;: [&quot;https://20jyns64.mirror.aliyuncs.com&quot;]</span></span>
<span class="line"><span style="color:#C3E88D;">}</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">EOF</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo systemctl daemon-reload</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">sudo systemctl restart docker</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>\u5B89\u88C5Jenkins</p><p><code>docker run -p 8080:8080 -p 50000:50000 -v jenkins_data:/var/jenkins_home jenkinsci/blueocean</code></p><p><code>docker run -d -u root --rm -p 9510:8080 --name jenkins -v jenkins-data:/var/jenkins_home jenkins/jenkins</code></p><p>\u5F00\u653E\u7AEF\u53E3</p><div class="language-shell line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">firewall-cmd --query-port=9510/tcp</span></span>
<span class="line"><span style="color:#A6ACCD;">firewall-cmd --zone=public --add-port=9510/tcp --permanent</span></span>
<span class="line"><span style="color:#A6ACCD;">firewall-cmd --reload</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">http://101.132.70.183:9510/</span></span>
<span class="line"><span style="color:#A6ACCD;">de94d06957faad89826e58c8bbe263152a05a21debe60226660b10efdd0cf706</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-shell line-numbers-mode"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">// \u8FDB\u5165\u5BB9\u5668\u5B9E\u4F8B</span></span>
<span class="line"><span style="color:#A6ACCD;">docker </span><span style="color:#82AAFF;">exec</span><span style="color:#A6ACCD;"> -it jenkins bash</span></span>
<span class="line"><span style="color:#A6ACCD;">// \u67E5\u770B\u521D\u59CB\u5316\u5BC6\u7801</span></span>
<span class="line"><span style="color:#A6ACCD;">cat /var/jenkins_home/secrets/initialAdminPassword</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">\u4E0D\u592A\u719F\u6089\uFF0C\u5B89\u88C5\u63A8\u8350\u63D2\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">youmengxi </span><span style="color:#89DDFF;">*********</span></span>
<span class="line"><span style="color:#A6ACCD;">http://101.132.70.183:9510/</span></span>
<span class="line"><span style="color:#A6ACCD;">jenkins_token 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</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div>`,29),c=[p];function r(o,i,t,d,b,m){return n(),a("div",null,c)}var y=s(l,[["render",r]]);export{C as __pageData,y as default};
